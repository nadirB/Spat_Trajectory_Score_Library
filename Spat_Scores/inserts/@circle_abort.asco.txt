@global $SPEED, $pi ; to use for setvar outControl with a whenever{(setvar...==setvar...)}
	$pi := 3.141592653589793



@fun_def X($t, $r, $offsetX) 

{ 
	$r*@cos($t) + $offsetX
} 

@fun_def Y($t, $r, $offsetY) 
{ 
	

	$r*@sin($t) + $offsetY
}




@proc_def circle($cmd, $iniT, $targeT, $r, $offsetX, $offsetY, $count, $SPEED)

{	
	
	@local $cpt
	$cpt := 0
	

    
    loop circleLoop $SPEED
	{
		;abort cercle_curve

		$cpt := $cpt + 1

		curve circleCurve @grain := 0.01s 
						  @Action := {
								
								@command($cmd) xy @X($t, $r, $offsetX) @Y($t, $r, $offsetY)  
							}

							@abort := 
							{		kill circleLoop
									print_antescofo "Curve circleCurve aborted at " $t
									Curve end
										@grain 0.1
										@action := {print_message "handler curve: " $t 
										;@command($cmd) xy @X($t, $r, $offsetX) @Y($t, $r, $offsetY)
										 }

									{

											$t { { ($t*$pi) } $SPEED { 0.0 } }

									}

							
							}

								

		
		
		{
			$t
					{
							   { ($iniT*$pi)  } /*@type "exp"*/
						$SPEED { ($targeT*$pi) }
						
	
					}
		}

		print_antescofo $cpt


	} during[$count#]

}


$circle := ::circle



