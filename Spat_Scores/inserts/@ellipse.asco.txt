;x(t) = acost
;y(t) = bsint

;
;t = [0, 2pi]

; si a > b, on a une ellipse de grand axe 2a portÃ© par x'x
; si b > a, --> 2b --> y'y


; $init [0, 2]
; $end [0, 2]

@global $pi
	$pi := 3.141592653589793

@global $r
$r := 1




@fun_def X($a, $alpha, $t, $offsetX) 

{ 

	$a*@cos($t) - $alpha*@sin($t) + $offsetX
} 

/////////////////

@fun_def Y($b, $beta, $t,  $offsetY) 
{ 
	

	$b*@sin($t) - $beta*@cos($t) + $offsetY
}




@proc_def ::ellipse($cmd, $initT, $endT, $a, $b, $alpha, $beta, $offsetX, $offsetY, $count1, $SPEED)

{	
	@global $SPEED ; to use for setvar outControl with a whenever{(setvar...==setvar...)}
	@local $offset, $cpt1
	$offset := 0.
	$cpt1 := 0
    
     loop pi $SPEED
	 {
		;abort ellipseAB_curve
	
		$cpt1 := $cpt1+1

		curve ellipseAB_curve @grain := 0.02s 
						@Action := {
								
								@command($cmd)  @X($a, $alpha, $t, $offsetX) @Y($b, $beta, $t, $offsetY)
							}

		

		
		
		{
			$t
					{
							   { ($initT*$pi)  } /*@type "exp"*/
						$SPEED { ($endT*$pi) }
						
	
					}
		}
			;print_antescofo $cpt1


	} during[$count1#]

}
